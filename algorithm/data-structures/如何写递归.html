<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>复盘笔记</title>
    <meta name="description" content="review notes">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/assets/css/0.styles.f469ceca.css" as="style"><link rel="preload" href="/assets/js/app.6b718b6e.js" as="script"><link rel="preload" href="/assets/js/2.56979001.js" as="script"><link rel="preload" href="/assets/js/25.4d21018c.js" as="script"><link rel="prefetch" href="/assets/js/10.e35d6c38.js"><link rel="prefetch" href="/assets/js/100.b43f30f4.js"><link rel="prefetch" href="/assets/js/101.9b4db5ff.js"><link rel="prefetch" href="/assets/js/102.e7afcb75.js"><link rel="prefetch" href="/assets/js/103.5084b6aa.js"><link rel="prefetch" href="/assets/js/104.e2baea87.js"><link rel="prefetch" href="/assets/js/105.71844694.js"><link rel="prefetch" href="/assets/js/106.322a281c.js"><link rel="prefetch" href="/assets/js/107.1faaf200.js"><link rel="prefetch" href="/assets/js/108.ae4124e8.js"><link rel="prefetch" href="/assets/js/109.20fa56a0.js"><link rel="prefetch" href="/assets/js/11.93080817.js"><link rel="prefetch" href="/assets/js/110.409beb33.js"><link rel="prefetch" href="/assets/js/111.b29470fa.js"><link rel="prefetch" href="/assets/js/112.97c26ff5.js"><link rel="prefetch" href="/assets/js/113.578755f6.js"><link rel="prefetch" href="/assets/js/114.583522d7.js"><link rel="prefetch" href="/assets/js/115.8c29af45.js"><link rel="prefetch" href="/assets/js/116.2eba3cdc.js"><link rel="prefetch" href="/assets/js/117.de5c63bb.js"><link rel="prefetch" href="/assets/js/118.9dcd8346.js"><link rel="prefetch" href="/assets/js/119.9279d704.js"><link rel="prefetch" href="/assets/js/12.634818c6.js"><link rel="prefetch" href="/assets/js/120.a6337cff.js"><link rel="prefetch" href="/assets/js/121.b2df9953.js"><link rel="prefetch" href="/assets/js/122.4cc895e1.js"><link rel="prefetch" href="/assets/js/123.8aeed9a2.js"><link rel="prefetch" href="/assets/js/124.44300d8a.js"><link rel="prefetch" href="/assets/js/125.af35d198.js"><link rel="prefetch" href="/assets/js/126.3f11275a.js"><link rel="prefetch" href="/assets/js/127.b3ee141b.js"><link rel="prefetch" href="/assets/js/128.6be026bb.js"><link rel="prefetch" href="/assets/js/129.92be4f4c.js"><link rel="prefetch" href="/assets/js/13.df39002b.js"><link rel="prefetch" href="/assets/js/130.547b03b2.js"><link rel="prefetch" href="/assets/js/131.a7695ccb.js"><link rel="prefetch" href="/assets/js/132.87c7fa9e.js"><link rel="prefetch" href="/assets/js/133.98050952.js"><link rel="prefetch" href="/assets/js/134.a0b9c46f.js"><link rel="prefetch" href="/assets/js/135.52bb5b24.js"><link rel="prefetch" href="/assets/js/136.86be9c75.js"><link rel="prefetch" href="/assets/js/137.cfcf019a.js"><link rel="prefetch" href="/assets/js/138.caa0b9e2.js"><link rel="prefetch" href="/assets/js/139.487ed756.js"><link rel="prefetch" href="/assets/js/14.662fe1f3.js"><link rel="prefetch" href="/assets/js/140.fbb03bb0.js"><link rel="prefetch" href="/assets/js/141.52805fdc.js"><link rel="prefetch" href="/assets/js/142.04c83664.js"><link rel="prefetch" href="/assets/js/143.c6b85fdd.js"><link rel="prefetch" href="/assets/js/144.0a9b75e7.js"><link rel="prefetch" href="/assets/js/145.3c4b85e4.js"><link rel="prefetch" href="/assets/js/146.13278ee8.js"><link rel="prefetch" href="/assets/js/147.5364cbec.js"><link rel="prefetch" href="/assets/js/148.aef3a1ec.js"><link rel="prefetch" href="/assets/js/149.2918034b.js"><link rel="prefetch" href="/assets/js/15.9b3afde9.js"><link rel="prefetch" href="/assets/js/150.94b4904c.js"><link rel="prefetch" href="/assets/js/151.a915d44b.js"><link rel="prefetch" href="/assets/js/152.05d7551c.js"><link rel="prefetch" href="/assets/js/153.a228e8bf.js"><link rel="prefetch" href="/assets/js/154.2cf984d2.js"><link rel="prefetch" href="/assets/js/155.cbeb07ee.js"><link rel="prefetch" href="/assets/js/156.4599d044.js"><link rel="prefetch" href="/assets/js/157.480ebeac.js"><link rel="prefetch" href="/assets/js/158.eac56ec4.js"><link rel="prefetch" href="/assets/js/159.70841340.js"><link rel="prefetch" href="/assets/js/16.17f1c6e4.js"><link rel="prefetch" href="/assets/js/160.c107138c.js"><link rel="prefetch" href="/assets/js/161.3640ab24.js"><link rel="prefetch" href="/assets/js/162.b2b06f59.js"><link rel="prefetch" href="/assets/js/163.a9a7cc88.js"><link rel="prefetch" href="/assets/js/164.e66e50fc.js"><link rel="prefetch" href="/assets/js/165.459e56a5.js"><link rel="prefetch" href="/assets/js/166.559bab0c.js"><link rel="prefetch" href="/assets/js/167.e46a94f1.js"><link rel="prefetch" href="/assets/js/168.1c00d821.js"><link rel="prefetch" href="/assets/js/169.610ffc7f.js"><link rel="prefetch" href="/assets/js/17.3edbb761.js"><link rel="prefetch" href="/assets/js/170.a5943000.js"><link rel="prefetch" href="/assets/js/171.2cafbd15.js"><link rel="prefetch" href="/assets/js/172.72cce1b0.js"><link rel="prefetch" href="/assets/js/173.4b488b85.js"><link rel="prefetch" href="/assets/js/174.e79c13a9.js"><link rel="prefetch" href="/assets/js/175.ced6ba15.js"><link rel="prefetch" href="/assets/js/176.99493f54.js"><link rel="prefetch" href="/assets/js/177.ea780c44.js"><link rel="prefetch" href="/assets/js/178.6d165d81.js"><link rel="prefetch" href="/assets/js/179.c880b4c3.js"><link rel="prefetch" href="/assets/js/18.298317b3.js"><link rel="prefetch" href="/assets/js/180.d1373621.js"><link rel="prefetch" href="/assets/js/181.d43486fb.js"><link rel="prefetch" href="/assets/js/182.7e614bc1.js"><link rel="prefetch" href="/assets/js/183.4831a0d6.js"><link rel="prefetch" href="/assets/js/184.3f30c1dc.js"><link rel="prefetch" href="/assets/js/185.13339408.js"><link rel="prefetch" href="/assets/js/186.cc4c8fb3.js"><link rel="prefetch" href="/assets/js/187.98c9e5fe.js"><link rel="prefetch" href="/assets/js/188.44c71b54.js"><link rel="prefetch" href="/assets/js/189.2b054af1.js"><link rel="prefetch" href="/assets/js/19.e845feba.js"><link rel="prefetch" href="/assets/js/190.c404c534.js"><link rel="prefetch" href="/assets/js/191.504ebd7f.js"><link rel="prefetch" href="/assets/js/192.63634034.js"><link rel="prefetch" href="/assets/js/193.f0023e37.js"><link rel="prefetch" href="/assets/js/194.7aa455a0.js"><link rel="prefetch" href="/assets/js/195.dc1800f4.js"><link rel="prefetch" href="/assets/js/196.74b823c7.js"><link rel="prefetch" href="/assets/js/197.68f0b69b.js"><link rel="prefetch" href="/assets/js/198.c25826b0.js"><link rel="prefetch" href="/assets/js/199.516ae84a.js"><link rel="prefetch" href="/assets/js/20.e21e169f.js"><link rel="prefetch" href="/assets/js/200.329d05a6.js"><link rel="prefetch" href="/assets/js/201.70ad75cc.js"><link rel="prefetch" href="/assets/js/202.9833b224.js"><link rel="prefetch" href="/assets/js/203.798d350b.js"><link rel="prefetch" href="/assets/js/204.9c88ea1b.js"><link rel="prefetch" href="/assets/js/205.17463e5a.js"><link rel="prefetch" href="/assets/js/206.fe9af1a5.js"><link rel="prefetch" href="/assets/js/207.efa825de.js"><link rel="prefetch" href="/assets/js/208.6d72de81.js"><link rel="prefetch" href="/assets/js/209.053582ff.js"><link rel="prefetch" href="/assets/js/21.3829e669.js"><link rel="prefetch" href="/assets/js/210.ee63f654.js"><link rel="prefetch" href="/assets/js/211.1242a945.js"><link rel="prefetch" href="/assets/js/212.95adc07f.js"><link rel="prefetch" href="/assets/js/213.48280fa5.js"><link rel="prefetch" href="/assets/js/214.d3825696.js"><link rel="prefetch" href="/assets/js/215.ecee2dce.js"><link rel="prefetch" href="/assets/js/216.8eb20886.js"><link rel="prefetch" href="/assets/js/217.d6443ca7.js"><link rel="prefetch" href="/assets/js/218.9c5348e4.js"><link rel="prefetch" href="/assets/js/219.b50fa022.js"><link rel="prefetch" href="/assets/js/22.428fddf2.js"><link rel="prefetch" href="/assets/js/23.07c2daa0.js"><link rel="prefetch" href="/assets/js/24.79e29066.js"><link rel="prefetch" href="/assets/js/26.08f2e49c.js"><link rel="prefetch" href="/assets/js/27.0e091ae2.js"><link rel="prefetch" href="/assets/js/28.d4a4e9cd.js"><link rel="prefetch" href="/assets/js/29.adca9cfb.js"><link rel="prefetch" href="/assets/js/3.c4cf9b23.js"><link rel="prefetch" href="/assets/js/30.ef9402a6.js"><link rel="prefetch" href="/assets/js/31.912ed182.js"><link rel="prefetch" href="/assets/js/32.5c27706e.js"><link rel="prefetch" href="/assets/js/33.d63ec164.js"><link rel="prefetch" href="/assets/js/34.fe3f0763.js"><link rel="prefetch" href="/assets/js/35.d0c0457e.js"><link rel="prefetch" href="/assets/js/36.7778a2a8.js"><link rel="prefetch" href="/assets/js/37.346346de.js"><link rel="prefetch" href="/assets/js/38.fb11ae82.js"><link rel="prefetch" href="/assets/js/39.30a1be25.js"><link rel="prefetch" href="/assets/js/4.24156544.js"><link rel="prefetch" href="/assets/js/40.a98422df.js"><link rel="prefetch" href="/assets/js/41.7cc1ce65.js"><link rel="prefetch" href="/assets/js/42.74714c5b.js"><link rel="prefetch" href="/assets/js/43.592a7b21.js"><link rel="prefetch" href="/assets/js/44.118a4699.js"><link rel="prefetch" href="/assets/js/45.f89e8552.js"><link rel="prefetch" href="/assets/js/46.c22349f0.js"><link rel="prefetch" href="/assets/js/47.6c762583.js"><link rel="prefetch" href="/assets/js/48.ea5b9087.js"><link rel="prefetch" href="/assets/js/49.2de376c0.js"><link rel="prefetch" href="/assets/js/5.e66c11e1.js"><link rel="prefetch" href="/assets/js/50.088990ba.js"><link rel="prefetch" href="/assets/js/51.452744fe.js"><link rel="prefetch" href="/assets/js/52.6d846067.js"><link rel="prefetch" href="/assets/js/53.403da50a.js"><link rel="prefetch" href="/assets/js/54.d0e00199.js"><link rel="prefetch" href="/assets/js/55.b406e419.js"><link rel="prefetch" href="/assets/js/56.1ccc5aba.js"><link rel="prefetch" href="/assets/js/57.8256001b.js"><link rel="prefetch" href="/assets/js/58.2ae9a3e2.js"><link rel="prefetch" href="/assets/js/59.c45ae4de.js"><link rel="prefetch" href="/assets/js/6.53c8f398.js"><link rel="prefetch" href="/assets/js/60.ea8460b5.js"><link rel="prefetch" href="/assets/js/61.5dfbe9b7.js"><link rel="prefetch" href="/assets/js/62.4207af74.js"><link rel="prefetch" href="/assets/js/63.aaa6fd7b.js"><link rel="prefetch" href="/assets/js/64.821aaa4b.js"><link rel="prefetch" href="/assets/js/65.ca01e064.js"><link rel="prefetch" href="/assets/js/66.a3a60ddc.js"><link rel="prefetch" href="/assets/js/67.c526853f.js"><link rel="prefetch" href="/assets/js/68.95170c15.js"><link rel="prefetch" href="/assets/js/69.2bc45181.js"><link rel="prefetch" href="/assets/js/7.14081864.js"><link rel="prefetch" href="/assets/js/70.e9ae916c.js"><link rel="prefetch" href="/assets/js/71.fdb52640.js"><link rel="prefetch" href="/assets/js/72.efb0bcea.js"><link rel="prefetch" href="/assets/js/73.0bf7ebcf.js"><link rel="prefetch" href="/assets/js/74.5ac732c2.js"><link rel="prefetch" href="/assets/js/75.f74b77c4.js"><link rel="prefetch" href="/assets/js/76.0f6ede51.js"><link rel="prefetch" href="/assets/js/77.8ac6445c.js"><link rel="prefetch" href="/assets/js/78.c45af0f4.js"><link rel="prefetch" href="/assets/js/79.01238732.js"><link rel="prefetch" href="/assets/js/8.ecd9cc4c.js"><link rel="prefetch" href="/assets/js/80.28f10134.js"><link rel="prefetch" href="/assets/js/81.0eb8ca64.js"><link rel="prefetch" href="/assets/js/82.f43d01a6.js"><link rel="prefetch" href="/assets/js/83.571ed791.js"><link rel="prefetch" href="/assets/js/84.709cd16e.js"><link rel="prefetch" href="/assets/js/85.daa86cb8.js"><link rel="prefetch" href="/assets/js/86.655d461b.js"><link rel="prefetch" href="/assets/js/87.10ab419b.js"><link rel="prefetch" href="/assets/js/88.b50bcd0b.js"><link rel="prefetch" href="/assets/js/89.00f62e53.js"><link rel="prefetch" href="/assets/js/9.56a6eac9.js"><link rel="prefetch" href="/assets/js/90.965814b1.js"><link rel="prefetch" href="/assets/js/91.a5dcbaf9.js"><link rel="prefetch" href="/assets/js/92.4393c610.js"><link rel="prefetch" href="/assets/js/93.58e507cf.js"><link rel="prefetch" href="/assets/js/94.2e71529a.js"><link rel="prefetch" href="/assets/js/95.9196635b.js"><link rel="prefetch" href="/assets/js/96.918806bc.js"><link rel="prefetch" href="/assets/js/97.bd395e2b.js"><link rel="prefetch" href="/assets/js/98.9e4ea1b8.js"><link rel="prefetch" href="/assets/js/99.392a4204.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f469ceca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">复盘笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java-core/" class="nav-link">
  Java 核心知识（In review）
</a></li><li class="dropdown-item"><!----> <a href="/language/java-concurrency/" class="nav-link">
  Java 并发编程
</a></li><li class="dropdown-item"><!----> <a href="/language/java-jvm/" class="nav-link">
  Java JVM-虚拟机
</a></li><li class="dropdown-item"><!----> <a href="/language/scala-basis/" class="nav-link">
  Scala 基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术框架" class="dropdown-title"><span class="title">技术框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/spark-basis/" class="nav-link">
  Spark 基础（In review）
</a></li><li class="dropdown-item"><!----> <a href="/framework/flink-basis/" class="nav-link">
  Flink 基础（In review）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法设计与理论" class="dropdown-title"><span class="title">算法设计与理论</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/data-structures/" class="nav-link router-link-active">
  数据结构（In review）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DevOps" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/git/" class="nav-link">
  Git（In review）
</a></li><li class="dropdown-item"><!----> <a href="/devops/dev-tools/" class="nav-link">
  工具收藏系列
</a></li></ul></div></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/学习方法.html" class="nav-link">
  学习方法
</a></li><li class="dropdown-item"><!----> <a href="/about/贡献说明.html" class="nav-link">
  贡献说明
</a></li></ul></div></div> <a href="https://github.com/GourdErwa/review-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/java-core/" class="nav-link">
  Java 核心知识（In review）
</a></li><li class="dropdown-item"><!----> <a href="/language/java-concurrency/" class="nav-link">
  Java 并发编程
</a></li><li class="dropdown-item"><!----> <a href="/language/java-jvm/" class="nav-link">
  Java JVM-虚拟机
</a></li><li class="dropdown-item"><!----> <a href="/language/scala-basis/" class="nav-link">
  Scala 基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术框架" class="dropdown-title"><span class="title">技术框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/spark-basis/" class="nav-link">
  Spark 基础（In review）
</a></li><li class="dropdown-item"><!----> <a href="/framework/flink-basis/" class="nav-link">
  Flink 基础（In review）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法设计与理论" class="dropdown-title"><span class="title">算法设计与理论</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/data-structures/" class="nav-link router-link-active">
  数据结构（In review）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DevOps" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/git/" class="nav-link">
  Git（In review）
</a></li><li class="dropdown-item"><!----> <a href="/devops/dev-tools/" class="nav-link">
  工具收藏系列
</a></li></ul></div></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试题
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/学习方法.html" class="nav-link">
  学习方法
</a></li><li class="dropdown-item"><!----> <a href="/about/贡献说明.html" class="nav-link">
  贡献说明
</a></li></ul></div></div> <a href="https://github.com/GourdErwa/review-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据结构-基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/algorithm/data-structures/数据结构概述.html" class="sidebar-link">数据结构概述</a></li><li><a href="/algorithm/data-structures/时间复杂度与空间复杂度.html" class="sidebar-link">时间复杂度与空间复杂度</a></li><li><a href="/algorithm/data-structures/字符串和数组.html" class="sidebar-link">字符串和数组</a></li><li><a href="/algorithm/data-structures/链表.html" class="sidebar-link">链表</a></li><li><a href="/algorithm/data-structures/队列.html" class="sidebar-link">队列</a></li><li><a href="/algorithm/data-structures/树.html" class="sidebar-link">树</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/algorithm/data-structures/算法题常见名词解释.html" class="sidebar-link">算法题常见名词解释</a></li><li><a href="/algorithm/data-structures/算法技巧总结.html" class="sidebar-link">算法技巧总结</a></li><li><a href="/algorithm/data-structures/如何写递归.html" class="active sidebar-link">如何写递归</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>专栏原创出处：<a href="https://github.com/GourdErwa/review-notes" target="_blank" rel="noopener noreferrer">github-源笔记文件 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，<a href="https://github.com/GourdErwa/leetcode" target="_blank" rel="noopener noreferrer">github-源码 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，欢迎 Star，转载请附上原文出处链接和本声明。</p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#_1-递归的定义">1. 递归的定义</a><ul><li><a href="#_1-1-递推关系">1.1 递推关系</a></li><li><a href="#_1-2-尾递归">1.2 尾递归</a></li></ul></li><li><a href="#_2-如何写出一个递归函数">2. 如何写出一个递归函数</a><ul><li><a href="#_2-1-寻找基本情况">2.1 寻找基本情况</a></li><li><a href="#_2-2-寻找递推关系（难点）">2.2 寻找递推关系（难点）</a></li><li><a href="#_2-3-优化递归函数">2.3 优化递归函数</a></li><li><a href="#_2-4-改为循环">2.4 改为循环</a></li></ul></li><li><a href="#_3-案例实战-递归乘法">3. 案例实战-递归乘法</a><ul><li><a href="#_3-1-审题思路">3.1 审题思路</a></li><li><a href="#_3-2-尝试递归">3.2 尝试递归</a></li><li><a href="#_3-3-尝试优化">3.3 尝试优化</a></li></ul></li><li><a href="#_4-案例实战-青蛙跳台阶">4. 案例实战-青蛙跳台阶</a></li><li><a href="#_5-再谈由上到下、由下到上">5. 再谈由上到下、由下到上</a></li><li><a href="#_6-递归算法推荐">6. 递归算法推荐</a></li><li><a href="#总结">总结</a></li><li><a href="#参考">参考</a></li></ul></div><p></p> <h2 id="_1-递归的定义"><a href="#_1-递归的定义" class="header-anchor">#</a> 1. 递归的定义</h2> <p>编程语言中，函数<code>Func(Type a,……)</code>直接或间接调用函数本身，则该函数称为「递归函数」。</p> <p>在实现递归函数之前，有两件重要的事情需要弄清楚:</p> <ul><li>递推关系：一个问题的结果与其子问题的结果之间的关系。</li> <li>基本情况：不需要进一步的递归调用就可以直接计算答案的情况。可理解为递归跳出条件。</li></ul> <p>一旦我们计算出以上两个元素，再想要实现一个递归函数，就只需要根据递推关系调用函数本身，直到其抵达基本情况。</p> <h3 id="_1-1-递推关系"><a href="#_1-1-递推关系" class="header-anchor">#</a> 1.1 递推关系</h3> <p>下面的插图给出了一个 5 行的帕斯卡三角，根据上面的定义，我们生成一个具有确定行数的帕斯卡三角形。</p> <div align="center"><img src="https://ipic-review-notes.oss-cn-beijing.aliyuncs.com/PascalTriangleAnimated2.gif"> <p>来源力扣</p></div> <p>首先，我们定义一个函数 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">f(i, j)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>，它将会返回帕斯卡三角形第 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span> 行、第 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span> 列的数字。可以看到，每行的最左边和最右边的数字是基本情况，它总是等于 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span></span></span></span>。
每个数是它左上方和右上方的数的和。</p> <ul><li>递推关系：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>)</mo><mo>=</mo><mi>f</mi><mo>(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>+</mo><mi>f</mi><mo>(</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">f(i, j) = f(i - 1, j - 1) + f(i - 1, j)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></li> <li>基本情况：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">f(i,j) = 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span> ，当 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">j=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span> 或者 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>=</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i=j</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span> 时。</li></ul> <h3 id="_1-2-尾递归"><a href="#_1-2-尾递归" class="header-anchor">#</a> 1.2 尾递归</h3> <p>尾递归：函数中所有的递归形式都出现在函数末尾时。</p> <p>递归函数的编写看起来比较难，其实是有套路可寻的，本问总结了写递归的一些范式技巧并在后续实战中进行验证。</p> <h2 id="_2-如何写出一个递归函数"><a href="#_2-如何写出一个递归函数" class="header-anchor">#</a> 2. 如何写出一个递归函数</h2> <p>下面我们以累加的示例说明写递归的思路。</p> <blockquote><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mn>4</mn><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1 + 2 + 3 + 4 + ... + n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mbin">+</span><span class="mord mathrm">3</span><span class="mbin">+</span><span class="mord mathrm">4</span><span class="mbin">+</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mbin">+</span><span class="mord mathit">n</span></span></span></span> ，函数表达式为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>+</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">f(n) = f(n-1) + n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit">n</span></span></span></span></p></blockquote> <h3 id="_2-1-寻找基本情况"><a href="#_2-1-寻找基本情况" class="header-anchor">#</a> 2.1 寻找基本情况</h3> <p>累加示例中，基本情况为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n = 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span> 时，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mn>1</mn><mo>)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">f(1) = 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span>。</p> <blockquote><p>你也可以设定为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mn>2</mn><mo>)</mo><mo>=</mo><mn>1</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">f(2) = 1 + 2 = 3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mrel">=</span><span class="mord mathrm">3</span></span></span></span>，只要能正确跳出递归即可。</p></blockquote> <h3 id="_2-2-寻找递推关系（难点）"><a href="#_2-2-寻找递推关系（难点）" class="header-anchor">#</a> 2.2 寻找递推关系（难点）</h3> <p>累加示例中，递推关系为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>+</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">f(n) = f(n-1) + n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit">n</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">f(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span> 每次执行时依赖 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">f(n-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span> 的结果，所以我们把 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">f(n-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span> 的结果看作是中间变量。</p> <blockquote><p>中间变量其实就是联系递归函数的纽带，分析出中间变量递归函数也就实现了 80%。</p></blockquote> <blockquote><p>大白话：当前结果必须借助前一个结果，前一个借助前前一个... 一直到时我们找到了「基本情况」。
然后拿到「基本情况」开始往回计算。这个过程我们简称为「由下到上」。</p></blockquote> <p>下面我们用 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mn>5</mn><mo>)</mo><mo>=</mo><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mn>4</mn><mo>+</mo><mn>5</mn><mo>=</mo><mn>1</mn><mn>5</mn></mrow><annotation encoding="application/x-tex">f(5) = 1 + 2 + 3 + 4 + 5 = 15</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathrm">5</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mbin">+</span><span class="mord mathrm">3</span><span class="mbin">+</span><span class="mord mathrm">4</span><span class="mbin">+</span><span class="mord mathrm">5</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">5</span></span></span></span> 这个过程进行分析。</p> <h4 id="_2-2-1-由下到上"><a href="#_2-2-1-由下到上" class="header-anchor">#</a> 2.2.1 由下到上</h4> <p><strong>由下到上</strong>：在每个递归层次上，我们首先递归地调用自身，然后根据返回值进行计算。（依赖返回值）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 
 * 模拟程序执行过程：
 * 5 + sum(4)
 * 5 + (4 + sum(3)
 * 5 + 4 + (3 + sum(2))
 * 5 + 4 + 3 + (2 + sum(1))
 * ------------------&gt; 到达基本情况 sum(1) = 1 ，开始执行 ③ 行代码
 * 5 + 4 + 3 + (2 + 1)
 * 5 + 4 + (3 + 3)
 * 5 + (4 + 6)
 * (5 + 10)
 * 15
 * &lt;p&gt;
 * 由下到上：最终从 1 + 2 + 3 + 4 + 5 计算...
 * 递归函数「开始」部分调用自身，这个过程就是找到基本情况），然后根据返回值进行计算。
 */</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">;</span>       <span class="token comment">// ① 递归基本情况</span>
    <span class="token keyword">int</span> childSum <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ② 寻找基本情况</span>
    <span class="token keyword">return</span> n <span class="token operator">+</span> childSum<span class="token punctuation">;</span>       <span class="token comment">// ③ 根据返回值运算</span>
<span class="token punctuation">}</span>
</code></pre></div><p>由下到上的过程其实是一个先寻找基本情况（基本情况），然后根据基本情况计算基本情况的父问题，一直到最后一个父问题计算后返回最终结果。</p> <blockquote><p>本示例中基本情况是 sum(1) = 1，基本情况的父问题是 sum(2) = 2 + sum(1)。</p></blockquote> <p><strong>由下到上-范式</strong></p> <ul><li>寻找递推关系</li> <li>寻找递归基本情况，跳出时返回基本情况的结果</li> <li>修改递归函数的参数，递归调用</li> <li>使用递归函数的返回值进行计算并返回最终结果</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> 返回值 <span class="token function">f</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>基本情况条件<span class="token punctuation">)</span> <span class="token keyword">return</span> 基本情况的结果<span class="token punctuation">;</span>       
    
    修改参数；
    返回值 <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    
    最终结果 <span class="token operator">=</span> 根据参数与返回值计算
    <span class="token keyword">return</span> 最终结果<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-2-2-由上到下"><a href="#_2-2-2-由上到下" class="header-anchor">#</a> 2.2.2 由上到下</h4> <p>假如我们换个思路，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>+</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">f(n) = f(n-1) + n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit">n</span></span></span></span> 中我们把 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">f(n-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span> 的结果提取出来 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo separator="true">,</mo><mi>S</mi><mi>U</mi><mi>M</mi><mo>)</mo><mo>=</mo><mi>S</mi><mi>U</mi><mi>M</mi><mo>+</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">f(n, SUM) = SUM + n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mbin">+</span><span class="mord mathit">n</span></span></span></span>，
每次计算都带着它，这样我们可以先计算当前的数值，然后把计算好的结果传递给下一次计算，这个过程我们称为「由上到下」。</p> <p><strong>由上到下</strong>：在递归层级中，我们根据当前「函数参数」计算出一些值，并在递归调用函数时将这些值传给自身。（依赖函数参数）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 模拟程序执行过程：
 * sum(5, 0)
 * sum(4, 5)
 * sum(3, 9)
 * sum(2, 12)
 * sum(1, 14)
 * 15
 * &lt;p&gt;
 * 由上到下：最终从 5 + 4 + 3 + 2 + 1 计算...
 * 递归函数「末尾」部分调用自身，根据逻辑先进行计算，然后把计算的中间变量传递调用函数。
 * &lt;p&gt;
 * 这种在函数末尾调用自身的递归函数叫做「尾递归」
 */</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sum2</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> sum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> sum<span class="token punctuation">;</span>
    sum <span class="token operator">+=</span> n<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">sum2</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>由上到下-范式</strong></p> <ul><li>寻找递推关系</li> <li>创建新函数，将「由下到上-范式」中的最终结果计算依赖的中间变量提取为函数的参数</li> <li>寻找递归基本情况，跳出时返回基本情况的结果与中间变量的计算结果（最终结果）</li> <li>根据函数参数与中间变量重新计算出新的中间变量</li> <li>修改参数</li> <li>递归调用并返回（该处的返回由基本情况触发）</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> 返回值 <span class="token function">f</span><span class="token punctuation">(</span>参数，中间变量<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>基本情况条件<span class="token punctuation">)</span> <span class="token keyword">return</span> 基本情况的结果与中间变量的计算结果<span class="token punctuation">;</span>
    
    中间变量 <span class="token operator">=</span> 根据参数与中间变量重新计算
    修改参数；
    
    <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>参数<span class="token punctuation">,</span>中间变量<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-2-3-由下到上、由上到下的区别"><a href="#_2-2-3-由下到上、由上到下的区别" class="header-anchor">#</a> 2.2.3 由下到上、由上到下的区别</h4> <p>两者最大的区别在于<strong>对中间变量</strong>的处理，参与计算的中间变量是参数提供的还是返回值提供的，这个过程最终决定了基本情况的返回值处理逻辑、递归函数的执行位置。</p> <p>递归函数在计算前先找到基本情况再算还是先算再找基本情况，这个过程也就是「由下到上、由上到下」的本质差异。</p> <div align="center"><img src="https://ipic-review-notes.oss-cn-beijing.aliyuncs.com/digui.jpg" height="700px"></div> <h3 id="_2-3-优化递归函数"><a href="#_2-3-优化递归函数" class="header-anchor">#</a> 2.3 优化递归函数</h3> <p>优化点总结为：</p> <ul><li><p>充分分析基本情况（跳出条件），避免临界值跳不出递归，导致栈溢出。</p></li> <li><p>分析递归深度，太深的递归容易导致栈溢出。</p></li> <li><p>分析是否有重复计算问题，主要分析函数参数值是否会出现重复，直接代入递归的递推关系中运算即可。如果会出现重复使用数据结构记录。</p> <p>比如：斐波那契数列 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>+</mo><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">f(n) = f(n-1) + f(n-2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">2</span><span class="mclose">)</span></span></span></span> ，如果直接采用该公式进行递归会重复计算很多表达式。</p></li></ul> <div align="center"><img src="https://ipic-review-notes.oss-cn-beijing.aliyuncs.com/102900.png" height="400px"> <p> 来源于[递归中的重复计算 ]：https://leetcode-cn.com/explore/orignial/card/recursion-i/258/memorization/1211/</p></div> <ul><li><p>分析数据溢出问题</p></li> <li><p>将「由下到上」优化为「由上到下」，再改写为尾递归，再退化为循环结构。因为递归会对栈及中间变量的状态保存有额外的开销。</p></li></ul> <h3 id="_2-4-改为循环"><a href="#_2-4-改为循环" class="header-anchor">#</a> 2.4 改为循环</h3> <p>递归本身的风险比较高，实际项目不推荐采用。部分编程语言可以对尾递归进行编译优化（优化为循环结构），比如 Scala 语言。但是部分语言不支持，比如 Java。</p> <p>函数式编程时推荐尾递归写法并加标识让编译器进行优化，下面是 scala 语言优化的案例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Scala 编译前的尾递归写法，并注解为尾递归</span>
<span class="token annotation punctuation">@scala</span><span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>tailrec
def <span class="token function">sum2</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> sum<span class="token operator">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> sum <span class="token operator">+</span> n
  <span class="token function">sum2</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> sum <span class="token operator">+</span> n<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 编译后优化为循环结果</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sum2</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> sum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> sum <span class="token operator">+</span> n<span class="token punctuation">;</span> 
    sum <span class="token operator">+=</span> n<span class="token punctuation">;</span>
    n<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>一个不是尾递归的案例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 并不是最后一行递归调用就是尾递归，下面例子其实是一个由下到上的递归写法，返回值与 n 有关。</span>
def <span class="token function">sum</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n
  <span class="token keyword">return</span> n <span class="token operator">+</span> <span class="token function">sum</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-案例实战-递归乘法"><a href="#_3-案例实战-递归乘法" class="header-anchor">#</a> 3. 案例实战-递归乘法</h2> <p>对于有些算法，递归比循环实现简单，比如二叉树的前中后序遍历。但是大部分时候循环比递归更直观更容易理解。</p> <p>下面我们以力扣一个算法题 <a href="https://leetcode-cn.com/problems/recursive-mulitply-lcci" target="_blank" rel="noopener noreferrer">递归乘法 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进行实战，实战前请花 10 min 时间尝试自我完成。</p> <blockquote><p>如果只是局限于看小说似的阅读，现在就可以「ALT+F4」了。 🙈</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code>递归乘法。 写一个递归函数，不使用 <span class="token operator">*</span> 运算符， 实现两个正整数的相乘。可以使用加号、减号、位移，但要吝啬一些。

示例 <span class="token number">1</span><span class="token operator">:</span>
 输入：<span class="token class-name">A</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">B</span> <span class="token operator">=</span> <span class="token number">10</span>
 输出：<span class="token number">10</span>

示例 <span class="token number">2</span><span class="token operator">:</span>
 输入：<span class="token class-name">A</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token class-name">B</span> <span class="token operator">=</span> <span class="token number">4</span>
 输出：<span class="token number">12</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">B</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-1-审题思路"><a href="#_3-1-审题思路" class="header-anchor">#</a> 3.1 审题思路</h3> <p>乘法本身是加法的变种，A * B = A 个 B 相加。</p> <p>寻找基本情况的条件为：A 个 B 相加一次 A - 1，A 如果为 1 时即找到最后一个 B 。</p> <p>首先我们用循环完成。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">multiplyFor</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">A</span><span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> sum <span class="token operator">+=</span> <span class="token class-name">B</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2-尝试递归"><a href="#_3-2-尝试递归" class="header-anchor">#</a> 3.2 尝试递归</h3> <p>寻找递推关系 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>)</mo><mo>=</mo><mi>b</mi><mo>+</mo><mi>f</mi><mo>(</mo><mi>a</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>b</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">f(a,b) = b + f(a-1,b)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mpunct">,</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">b</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span>，基本情况条件为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>&lt;</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">a &lt; 2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mrel">&lt;</span><span class="mord mathrm">2</span></span></span></span> 时表示找到最后一个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span></p> <p>套入「由下到上」的范式如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">-</span> 寻找递推关系
<span class="token operator">-</span> 寻找递归基本情况，跳出时返回基本情况的结果 <span class="token operator">-&gt;</span> <span class="token class-name">B</span>
<span class="token operator">-</span> 修改递归函数的参数，递归调用 <span class="token operator">-&gt;</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token class-name">A</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token keyword">return</span> sum
<span class="token operator">-</span> 使用递归函数的返回值进行计算并返回最终结果 <span class="token operator">-&gt;</span> sum <span class="token operator">+</span> <span class="token class-name">B</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">A</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token class-name">B</span><span class="token punctuation">;</span>          <span class="token comment">// 跳出时返回基本情况的结果</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token class-name">A</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 先递归</span>
    <span class="token keyword">return</span> sum <span class="token operator">+</span> <span class="token class-name">B</span><span class="token punctuation">;</span>               <span class="token comment">// 再计算，依赖递归的返回值</span>
<span class="token punctuation">}</span>
</code></pre></div><p>尝试转换为递归「由上到下」（尾递归），依赖中间结果（每次的和），先计算再递归。</p> <p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>)</mo><mo>=</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo>+</mo><mi>f</mi><mo>(</mo><mi>a</mi><mo>−</mo><mi>n</mi><mo separator="true">,</mo><mi>b</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">f(a,b) = sum + f(a-n,b)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mpunct">,</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mbin">−</span><span class="mord mathit">n</span><span class="mpunct">,</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">sum</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span> 为已经计算了的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span> 个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> 的和。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">-</span> 寻找递推关系
<span class="token operator">-</span> 创建新函数，将「由下到上<span class="token operator">-</span>范式」中的最终结果计算依赖的中间变量提取为函数的参数 <span class="token operator">-&gt;</span> multiply1Help 函数 sum 为中间变量
<span class="token operator">-</span> 寻找递归基本情况，跳出时返回基本情况的结果与中间变量的计算结果（最终结果） <span class="token operator">-&gt;</span> <span class="token keyword">return</span> <span class="token class-name">B</span> <span class="token operator">+</span> sum
<span class="token operator">-</span> 根据函数参数与中间变量重新计算出新的中间变量 <span class="token operator">-&gt;</span> sum <span class="token operator">+=</span> <span class="token class-name">B</span>
<span class="token operator">-</span> 修改参数 <span class="token operator">-&gt;</span> <span class="token class-name">A</span> <span class="token operator">-</span> <span class="token number">1</span>
<span class="token operator">-</span> 递归调用并返回（该处的返回由基本情况条件触发）<span class="token operator">-&gt;</span> <span class="token class-name">B</span> <span class="token operator">+</span> sum

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">multiply1</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">multiply1Help</span><span class="token punctuation">(</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">multiply1Help</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token keyword">int</span> sum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">A</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token class-name">B</span> <span class="token operator">+</span> sum<span class="token punctuation">;</span>          <span class="token comment">// 跳出时返回基本情况的结果与中间变量的计算结果</span>
    sum <span class="token operator">+=</span> <span class="token class-name">B</span><span class="token punctuation">;</span>                           <span class="token comment">// 根据函数参数与中间变量重新计算出新的中间变量</span>
    <span class="token keyword">return</span> <span class="token function">multiply1Help</span><span class="token punctuation">(</span><span class="token class-name">A</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">B</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 由基本情况条件触发决定，最终返回 B + sum</span>
<span class="token punctuation">}</span>
</code></pre></div><p>至此，两个递归写法已实现，实际编码中「由上到下」比「由下到上」更容易理解，因为我们的思维从上向下思考容易，但是逆着思考就比较抽象了。
这个抽象过程的训练需要大量的练习，末尾推荐了部分递归的算法题。</p> <h3 id="_3-3-尝试优化"><a href="#_3-3-尝试优化" class="header-anchor">#</a> 3.3 尝试优化</h3> <p>分析上述实现的两个递归时间复杂度为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>=</mo><mi>M</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">n = Max(A,B)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">A</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span>，考虑如何优化时间复杂度。</p> <ul><li>如果 A &gt; B ，处理 A 次，因此考虑使用 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo>=</mo><mi>M</mi><mi>I</mi><mi>N</mi><mo>(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">M=MIN(A,B)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathit">A</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span> 作为循环次数。比如 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mn>0</mn><mn>0</mn><mo>∗</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">100 * 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mbin">∗</span><span class="mord mathrm">1</span></span></span></span> 时可优化 100 倍</li> <li>分析重复计算问题，目前没有。</li> <li>分析参数的边界问题，目前没有。题目给定约束都是正整数。</li> <li>优化时间复杂度，重新分析递推关系为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>∗</mo><mi>b</mi><mo>=</mo><mo>(</mo><mi>a</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo>)</mo><mo>∗</mo><mo>(</mo><mi>b</mi><mo>∗</mo><mn>2</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">a * b = (a/2) * (b*2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mbin">∗</span><span class="mord mathit">b</span><span class="mrel">=</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="mbin">∗</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mbin">∗</span><span class="mord mathrm">2</span><span class="mclose">)</span></span></span></span>，直到 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">a/2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span></span></span></span> 等于 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span></span></span></span> 时，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> 就是最终结果，我们基于二进制的位移操作进行优化，
但是考虑如果是奇数除以 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span></span></span></span> 时会丢失一个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span>，这样复杂度优化为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msub><mi>log</mi><mn>2</mn></msub><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">O(\log_2n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="vlist"><span style="top:0.24444em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></li></ul> <div class="language- extra-class"><pre class="language-text"><code>优化过程示例：a * b = (a/2) * (b*2)

偶数为循环次数的运算过程
8 * 9 
4 * 18
2 * 36
1 * 72
72

奇数为循环次数的运算过程
7 * 9
9 + (3 * 18)        -&gt; 7/2 时丢失一个 9 
9 + 18 + (1 * 36)   -&gt; 3/2 时丢失一个 18 
9 + 18 + 36 
63
</code></pre></div><p>将上述过程转换为「由上到下」尾递归代码实现（你可以尝试「由下到上」实现，可以套入范式进行验证）：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">multiply2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">A</span> <span class="token operator">&lt;</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">multiply2Help</span><span class="token punctuation">(</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">multiply2Help</span><span class="token punctuation">(</span><span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 寻找最小循序次数</span>
<span class="token punctuation">}</span>

<span class="token comment">// missPart 为奇数除以 2 时丢失的部分</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">multiply2Help</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token keyword">int</span> missPart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">A</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> missPart <span class="token operator">+</span> <span class="token class-name">B</span><span class="token punctuation">;</span>   <span class="token comment">// 最终结果 = 丢失的部分 + 最终 B 的结果</span>
    missPart <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token class-name">A</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token class-name">B</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 是否为奇数，奇数时记录丢失的部分</span>
    <span class="token keyword">return</span> <span class="token function">multiply2Help</span><span class="token punctuation">(</span><span class="token class-name">A</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">B</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> missPart<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 位移运算优化</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-案例实战-青蛙跳台阶"><a href="#_4-案例实战-青蛙跳台阶" class="header-anchor">#</a> 4. 案例实战-青蛙跳台阶</h2> <blockquote><p>一只青蛙一次可以跳上 1 级台阶，也可以跳上 2 级台阶。求该青蛙跳上一个 n 级的台阶总共有多少种跳法。 n = 0 时忽略。</p></blockquote> <ol><li><p>寻找基本情况：剩余一个台阶时只能有一种跳法 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mn>1</mn><mo>)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">f(1) = 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span>，剩余两个台阶时只能有两种跳法 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mn>2</mn><mo>)</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">f(2) = 2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">2</span></span></span></span>，或者剩余 3 个台阶时有 3 种跳法（1-1-1、1-2、2-1）</p></li> <li><p>寻找递推关系：如果跳 1 级台阶就少一个，结果为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">f(n-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span> 种，如果跳 2 级台阶就少 2 个，结果为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">f(n-2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">2</span><span class="mclose">)</span></span></span></span> 种。<br>
所以推导递推关系为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>+</mo><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">f(n) = f(n-1) + f(n-2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">2</span><span class="mclose">)</span></span></span></span></p></li> <li><p>优化递归：考虑重复计算问题，因为涉及减法运算，肯定会出现重复代入 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">f(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span> 计算，因此考虑使用数据结构保存计算过的结果。分析数据溢出问题，如果没有给定约束条件，要考虑返回跳法是否会溢出。</p></li></ol> <p>由下到上的范式套入实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * - 寻找递推关系 f(n)=f(n-1)+f(n-2)
 * - 寻找递归基本情况，跳出时返回基本情况的结果 f(1) = 1,f(2) = 2
 * - 修改递归函数的参数，递归调用 -&gt; 套入递推关系，当前 n 台阶跳法为 count=f(n-1)+f(n-2)
 * - 使用递归函数的返回值进行计算并返回最终结果 -&gt; 递归返回跳法数 count 即为最终结果 
 */</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numWays1</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token function">numWays1</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">numWays1</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 优化思路，2 个 if 可有优化 为 if (n &lt;= 2) return n; 减少执行次数</span>
<span class="token comment">// 递归函数重复计算问题，使用临时变量保存</span>

<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> statusRecord <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numWays</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">;</span> <span class="token comment">// if 判断比计算状态判断开销小，因此先进行 if</span>
    <span class="token keyword">final</span> <span class="token class-name">Integer</span> integer <span class="token operator">=</span> statusRecord<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 计算状态判断，已经计算直接返回</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>integer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> integer<span class="token punctuation">;</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token function">numWays</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">numWays</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    statusRecord<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 计算的结果保存至状态表</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 至此除了数据溢出问题没有处理，重复计算已优化。</span>
</code></pre></div><p>由上到下的范式套入实现：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 由上到下的范式套入实现：
 * 
 * - 寻找递推关系
 * 由下到上递推关系为，f(n) = f(n-1) + f(n-2) 相当于从 n-1 的计算过程，先从 n 找到 1，然后在从 1 累加到 n 的过程
 * 我们改为从 1-n 的过程，f(i+1) = f(i) + f(i-1) ， i+1==n 时计算结束，累加的过程变量需要我们提取为中间变量参数
 * 
 * - 创建新函数，将「由下到上-范式」中的最终结果计算依赖的中间变量提取为函数的参数
 * 将 f(i)，f(i-1) 的变量保存，初始调用我们使用 f(2) = f(1) + f(0) = 1 + 1 作为初始状态
 * 
 * - 寻找基本情况，跳出时返回基本情况的结果与中间变量的计算结果（最终结果）-&gt; if (i &gt;= n) return a + b;
 * 
 * - 根据函数参数与中间变量重新计算出新的中间变量
 * f(i) = f(i-1) + f(i-2) = a + b
 * f(i+1) = f(i) + f(i-1) = (a+b) + b
 * 
 * - 修改参数 -&gt; i + 1 递进一步
 * 
 * - 递归调用并返回（该处的返回由基本情况条件触发）
 */</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numWaysTail</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">numWaysTailHelp</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">numWaysTailHelp</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> n<span class="token punctuation">)</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">numWaysTailHelp</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 因为是从 1-n 的计算，所以不会出现重复计算过程。</span>
</code></pre></div><p>尾递归优化为循环结构：（也称为<a href="https://www.zhihu.com/question/39948290" target="_blank" rel="noopener noreferrer">动态规划 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numWaysFor</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">;</span>

    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 与尾递归 numWaysTailHelp 一致</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token comment">// 保存次数，将尾递归的返回值提取为变量</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 1-n 的过程  </span>
        <span class="token comment">// 因为 f(i) = f(i-1) + f(i-2) = a + b </span>
        <span class="token comment">// 下次迭代时 f(i+1) = f(i) + f(i-1) = (a+b) + b</span>
        count <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        b <span class="token operator">=</span> a<span class="token punctuation">;</span>
        a <span class="token operator">=</span> count<span class="token punctuation">;</span>
        i<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_5-再谈由上到下、由下到上"><a href="#_5-再谈由上到下、由下到上" class="header-anchor">#</a> 5. 再谈由上到下、由下到上</h2> <p>一般情况，我们说递归时指的是「由下到上」，因为「由上到下」的过程往往需要创建新函数去完成，更甚至「由上到下」其实就是循环结构封装为函数式编程的写法，也叫尾递归。
由下到上转换为由上到下的过程其实就是转换为循环结构写法的过程。</p> <p>递归难以理解的地方在于由下到上的过程，其实细化该难点可以分为「基本情况」-&gt;「改变参数继续递归」-&gt;「拿到递归返回值与当前参数计算」。
实际编码中我们只要按上述提到的范式进行代码编写，上述示例中的基本情况比较单一，中间变量也只涉及一个，对于复杂的跳出及中间变量的处理只要按范式步骤进行分析然后再优化一定可以写出一个递归函数。</p> <p>对于递推关系的寻找过程，没有范式可寻，需要见多识广（🙉刷刷刷🙉），不断总结。</p> <h2 id="_6-递归算法推荐"><a href="#_6-递归算法推荐" class="header-anchor">#</a> 6. 递归算法推荐</h2> <ul><li><a href="https://leetcode-cn.com/problemset/all/?topicSlugs=recursion" target="_blank" rel="noopener noreferrer">力扣-递归标签相关算法 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://leetcode-cn.com/explore/learn/card/data-structure-binary-tree/" target="_blank" rel="noopener noreferrer">力扣-卡片-二叉树 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://leetcode-cn.com/explore/featured/card/recursion-i/" target="_blank" rel="noopener noreferrer">力扣-卡片-递归 I<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>简单的总结为：</p> <ul><li>你要写哪种类型的递归，从上算还是从下算，这决定了你如何确认递推关系</li> <li>分析基本情况</li> <li>寻找递推关系，在递推关系中提取中间变量</li> <li>套入上文中的递归范式</li> <li>按上文中的优化点进行优化</li></ul> <p>题外话：对于自上而下的计算不是必须创建新函数去传入中间变量，因为有时我们可以使用全局变量保存、或者直接修改当前递推关系中的变量即可。
推荐使用总结内容「由上到下、由下到上、循环结构」三种方法完成<a href="https://leetcode-cn.com/problems/reverse-linked-list/" target="_blank" rel="noopener noreferrer">力扣-206. 反转链表 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p>本内容随着对数据结构算法的深入，持续更新。</p> <ul><li><a href="https://leetcode-cn.com/" target="_blank" rel="noopener noreferrer">力扣 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://leetcode-cn.com/problems/qing-wa-tiao-tai-jie-wen-ti-lcof/" target="_blank" rel="noopener noreferrer">青蛙跳台阶问题 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <blockquote><p>更多相关专栏内容汇总：</p> <ul><li><a href="https://gourderwa.blog.csdn.net/article/details/104020339" target="_blank" rel="noopener noreferrer">Java 核心知识-专栏文章目录汇总 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/xiaohulunb/article/details/103594468" target="_blank" rel="noopener noreferrer">Java 并发编程-专栏文章目录汇总 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/xiaohulunb/article/details/103828570" target="_blank" rel="noopener noreferrer">Java JVM（JDK13）-专栏文章目录汇总 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/xiaohulunb/article/details/104368031" target="_blank" rel="noopener noreferrer">数据结构与算法-专栏文章目录汇总 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></blockquote> <div align="center"><img src="https://blog-review-notes.oss-cn-beijing.aliyuncs.com/gourderwa.footer.jpeg"></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后修改时间:</span> <span class="time">2/22/2020, 4:51:12 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/algorithm/data-structures/算法技巧总结.html" class="prev">
        算法技巧总结
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><div class="reading-progress top" data-v-56679cca><div class="progress" data-v-56679cca></div></div></div></div>
    <script src="/assets/js/app.6b718b6e.js" defer></script><script src="/assets/js/2.56979001.js" defer></script><script src="/assets/js/25.4d21018c.js" defer></script>
  </body>
</html>
